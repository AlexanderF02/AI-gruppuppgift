import { useState, useEffect } from "react";
import { GoogleGenerativeAI } from "@google/generative-ai";

export default function LadyContentAI() {
  const apiKey = process.env.NEXT_PUBLIC_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
    systemInstruction: "You are a Lady of the night. Your name is LadyContent.",
  });

  const [prompt, setPrompt] = useState([]);
  const [answer, setAnswer] = useState("");
  const [history, setHistory] = useState([]);

  async function sendPrompt() {
    const result = await model.generateContent(prompt);
    const answerText = result.response.text();
    setAnswer(answerText);
    const newHistory = [...history];
    newHistory.push({ prompt, answer });
    setHistory(newHistory);
  }

  async function sendOnPageLoad(question) {
    const result = await model.generateContent(question);
    setAnswer(result.response.text());
  }

  useEffect(() => {
    sendOnPageLoad(
      "Can you generate content for me? Please act as if I did not ask, you are just offering your assistance as a service."
    );
  }, []);

  useEffect(() => {
    if (history.length > 0) {
      localStorage.setItem("history", JSON.stringify(history));
    }
  }, [history]);

  return (
    <>
      <div
        id="mainContainer"
        className="flex flex-col justify-start items-start"
      >
        <div
          id="topContainer"
          className="flex flex-row justify-between items-center p-8 mt-24 lg:mt-16 w-full"
        >
          <div>
            <svg
              width="493"
              height="128"
              viewBox="0 0 493 128"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M41.7031 88.6562C42.5469 89.875 42.9688 91.3438 42.9688 93.0625C42.9688 94.7812 42.8438 96.2656 42.5938 97.5156C42.375 98.7656 42.0625 99.9531 41.6562 101.078C40.7188 103.547 39.5312 105.188 38.0938 106H0.40625C2.875 104.469 4.48438 103.141 5.23438 102.016C6.67188 99.8906 7.39062 97.1406 7.39062 93.7656C7.35938 85.4531 7.34375 77.9375 7.34375 71.2188V46.6562C7.34375 42.125 6.59375 38.7969 5.09375 36.6719C4.5625 35.8906 3.90625 35.0938 3.125 34.2812H22.3906C20.5469 36.9375 19.5 39.6719 19.25 42.4844C19.1875 43.4219 19.1562 44.4531 19.1562 45.5781V88.5156C19.1562 94.3594 19.4688 97.8594 20.0938 99.0156C20.7188 100.141 21.4688 100.812 22.3438 101.031C23.2188 101.219 24.5469 101.312 26.3281 101.312C28.1094 101.312 29.7969 101 31.3906 100.375C32.9844 99.75 34.4062 98.875 35.6562 97.75C37.7812 95.8125 39.7969 92.7812 41.7031 88.6562Z"
                fill="black"
              />
              <path
                d="M84.6613 80.9688L84.5206 89.9688C84.5206 95.5625 85.0363 99.375 86.0675 101.406C86.6925 102.625 87.4269 103.562 88.2706 104.219L90.4738 106H76.88L75.4269 100.562C71.8956 104.812 66.8644 106.938 60.3331 106.938C56.6144 106.938 53.6144 105.688 51.3331 103.188C49.3331 100.938 48.3331 98.2812 48.3331 95.2188C48.3331 92.1562 49.0519 89.4844 50.4894 87.2031C51.9581 84.9219 53.88 83.0312 56.255 81.5312C60.9425 78.625 66.8331 77.1094 73.9269 76.9844V76.4688C73.9269 68.875 72.755 64.4219 70.4113 63.1094C69.5675 62.6406 68.4738 62.4062 67.13 62.4062C65.8175 62.4062 64.505 62.8438 63.1925 63.7188C61.88 64.5938 60.6925 65.7188 59.63 67.0938C57.505 69.875 55.9894 73.1562 55.0831 76.9375C52.3019 75.2812 50.9113 72.1094 50.9113 67.4219C50.9113 65.5156 51.1613 63.375 51.6613 61C52.8488 61 53.9738 60.8281 55.0363 60.4844L58.6456 59.3594C62.1769 58.2656 65.63 57.7188 69.005 57.7188C72.38 57.7188 75.0675 58.2188 77.0675 59.2188C79.0988 60.2188 80.6769 61.7031 81.8019 63.6719C83.7081 67.0156 84.6613 72.7812 84.6613 80.9688ZM58.4581 96.1562C58.4581 98.0938 58.8956 99.5938 59.7706 100.656C60.6769 101.719 61.8019 102.25 63.1456 102.25C64.4894 102.25 65.7863 101.906 67.0363 101.219C68.2863 100.5 69.4113 99.5312 70.4113 98.3125C72.755 95.5312 73.9269 92.2656 73.9269 88.5156V81.5781C69.5519 81.9844 65.9425 83.4375 63.0988 85.9375C60.005 88.625 58.4581 92.0312 58.4581 96.1562Z"
                fill="black"
              />
              <path
                d="M119.752 102.297C116.346 105.391 112.018 106.938 106.768 106.938C101.955 106.938 98.1581 105.547 95.3769 102.766C92.5019 99.8906 91.0644 95.8438 91.0644 90.625C91.0644 85.375 91.83 80.7969 93.3613 76.8906C94.8925 72.9531 96.9081 69.6562 99.4081 67C104.346 61.75 110.408 58.9844 117.596 58.7031C117.346 49.0781 117.018 43.5625 116.611 42.1562C116.236 40.7188 115.846 39.5938 115.439 38.7812C115.064 37.9375 114.627 37.1719 114.127 36.4844L112.533 34.2812H129.643C128.768 37.4375 128.252 40.5 128.096 43.4688C127.971 46.4375 127.877 49.0469 127.814 51.2969C127.752 53.5469 127.705 55.9062 127.674 58.375C127.58 62.5 127.533 66.6094 127.533 70.7031C127.533 74.7656 127.533 77.8438 127.533 79.9375C127.564 82.0312 127.611 84.0156 127.674 85.8906C127.83 92.9219 128.096 97.1094 128.471 98.4531C128.846 99.7656 129.221 100.828 129.596 101.641C130.002 102.422 130.455 103.156 130.955 103.844L132.549 106H120.408L119.752 102.297ZM117.643 88.7969C117.799 83.9844 117.877 79.4844 117.877 75.2969C117.877 71.0781 117.83 67.0625 117.736 63.25C113.205 63.9375 109.58 66.6094 106.861 71.2656C104.143 75.8906 102.783 81.7188 102.783 88.75C102.783 92.9062 103.096 95.8125 103.721 97.4688C104.377 99.125 105.143 100.344 106.018 101.125C106.924 101.875 108.002 102.25 109.252 102.25C110.533 102.25 111.643 102 112.58 101.5C113.549 100.969 114.393 100.203 115.111 99.2031C116.674 97.0781 117.518 93.6094 117.643 88.7969Z"
                fill="black"
              />
              <path
                d="M160.445 90.4844L160.492 80.0781C160.492 73.5469 160.32 69.2812 159.976 67.2812C159.633 65.2812 159.351 63.8906 159.133 63.1094C158.945 62.2969 158.711 61.5469 158.429 60.8594L157.539 58.6562H171.367L171.133 60.8125C170.945 62.3125 170.82 64.5 170.758 67.375L170.57 74.5C170.414 79.9688 170.336 85.0781 170.336 89.8281C170.336 94.5781 170.039 98.6406 169.445 102.016C168.883 105.391 168.117 108.359 167.148 110.922C166.179 113.484 165.07 115.688 163.82 117.531C162.57 119.406 161.258 120.969 159.883 122.219C157.508 124.469 154.851 126.094 151.914 127.094C151.289 126.844 150.679 126.375 150.086 125.688C149.523 125.031 149.179 124.406 149.054 123.812C151.804 122.406 154.008 120.25 155.664 117.344C158.008 113.219 159.492 107.266 160.117 99.4844C156.492 104.453 152.039 106.938 146.758 106.938C143.008 106.938 140.101 105.469 138.039 102.531C136.07 99.6875 135.086 95.7812 135.086 90.8125V84.4844C135.086 83.0781 135.07 81.6406 135.039 80.1719V75.9062C134.976 73.1875 134.867 71.0781 134.711 69.5781C134.586 68.0469 134.429 66.7812 134.242 65.7812C134.086 64.75 133.883 63.8438 133.633 63.0625C133.383 62.25 133.101 61.5 132.789 60.8125L131.758 58.6562H146.054C145.242 63.125 144.836 71.5781 144.836 84.0156C144.836 89.0781 145.101 92.4531 145.633 94.1406C146.164 95.8281 146.82 97.0625 147.601 97.8438C148.414 98.5938 149.445 98.9688 150.695 98.9688C151.945 98.9688 153.039 98.7812 153.976 98.4062C154.945 98 155.82 97.4688 156.601 96.8125C158.133 95.625 159.414 93.9844 160.445 91.8906V90.4844Z"
                fill="black"
              />
              <path
                d="M226.096 31C227.003 32.2812 227.456 34.25 227.456 36.9062C227.456 39.5312 227.362 41.6719 227.174 43.3281C227.018 44.9531 226.768 46.5312 226.424 48.0625C225.674 51.5 224.628 54.0938 223.284 55.8438C222.128 49.8125 220.628 45.5 218.784 42.9062C216.846 40.2812 214.315 38.9688 211.19 38.9688C208.096 38.9688 205.674 39.5625 203.924 40.75C202.174 41.9375 200.831 43.5 199.893 45.4375C198.331 48.6562 197.549 53.4062 197.549 59.6875C197.549 65.9375 198.253 71.6719 199.659 76.8906C201.096 82.0781 203.128 86.5469 205.753 90.2969C211.284 98.2656 218.487 102.25 227.362 102.25C227.237 103.656 226.503 104.875 225.159 105.906C224.753 106.219 224.315 106.406 223.846 106.469C212.503 106.469 203.253 102.297 196.096 93.9531C188.503 85.0781 184.706 72.9844 184.706 57.6719C184.706 49.6719 187.049 43.6562 191.737 39.625C195.893 36.0625 201.581 34.2812 208.799 34.2812L216.628 34.375C220.315 34.375 222.909 33.8438 224.409 32.7812C225.034 32.3125 225.596 31.7188 226.096 31Z"
                fill="black"
              />
              <path
                d="M244.576 62.4062C241.764 62.4062 239.732 63.8125 238.482 66.625C237.264 69.4375 236.654 74.1719 236.654 80.8281C236.654 95.1094 239.295 102.25 244.576 102.25C247.389 102.25 249.404 100.344 250.623 96.5312C251.873 92.7188 252.498 87.4844 252.498 80.8281C252.498 74.1719 251.873 69.4375 250.623 66.625C249.404 63.8125 247.389 62.4062 244.576 62.4062ZM224.842 79.0469C224.842 64.8281 231.42 57.7188 244.576 57.7188C257.732 57.7188 264.311 64.8281 264.311 79.0469C264.311 87.6719 262.498 94.5 258.873 99.5312C255.342 104.469 250.576 106.938 244.576 106.938C238.576 106.938 233.811 104.469 230.279 99.5312C226.654 94.5 224.842 87.6719 224.842 79.0469Z"
                fill="black"
              />
              <path
                d="M268.396 106C269.834 101.062 270.552 92.5781 270.552 80.5469C270.552 71.9844 269.802 66.1406 268.302 63.0156C267.927 62.2344 267.506 61.5 267.037 60.8125L265.49 58.6562H281.756C281.287 60.2188 280.974 61.6875 280.818 63.0625L280.443 66.4375C284.224 60.625 289.037 57.7188 294.881 57.7188C298.662 57.7188 301.615 59.1875 303.74 62.125C305.802 65 306.834 68.8906 306.834 73.7969V78.8125C306.834 87.4062 306.912 92.6562 307.068 94.5625C307.224 96.4688 307.349 97.9219 307.443 98.9219C307.537 99.9219 307.646 100.812 307.771 101.594C307.99 103.062 308.318 104.531 308.756 106H295.021C296.459 101.062 297.177 92.5781 297.177 80.5469C297.177 75.7344 296.865 72.4375 296.24 70.6562C295.646 68.875 294.927 67.6094 294.084 66.8594C293.24 66.0781 292.131 65.6875 290.756 65.6875C288.224 65.6875 285.927 66.6875 283.865 68.6875C282.084 70.4062 280.724 72.5938 279.787 75.25C279.724 76.0938 279.693 76.9688 279.693 77.875V80.5469C279.693 92.5781 280.412 101.062 281.849 106H268.396Z"
                fill="black"
              />
              <path
                d="M324.796 39.9062C324.14 42.3125 323.812 45.2031 323.812 48.5781C323.812 51.9219 323.874 54.0625 323.999 55C324.156 55.9375 324.39 56.6875 324.702 57.25C325.296 58.1875 326.452 58.6562 328.171 58.6562H340.734C340.734 60.4062 340.312 61.75 339.468 62.6875C337.937 64.375 336.062 65.2188 333.843 65.2188C332.749 65.2188 331.781 65.0625 330.937 64.75C329.406 64.125 328.218 63.8125 327.374 63.8125C326.531 63.8125 325.843 63.9844 325.312 64.3281C324.781 64.6406 324.359 65.1094 324.046 65.7344C323.484 66.8594 323.202 69.3125 323.202 73.0938C323.202 76.875 323.312 80.75 323.531 84.7188C323.781 88.6875 324.374 92.0156 325.312 94.7031C326.249 97.3594 327.671 99.3594 329.577 100.703C331.484 102.047 334.109 102.719 337.452 102.719C337.452 103.688 336.796 104.844 335.484 106.188C335.14 106.562 334.843 106.812 334.593 106.938C329.062 106.938 324.921 106.281 322.171 104.969C319.015 103.406 316.765 100.625 315.421 96.625C314.077 92.5625 313.406 86.5469 313.406 78.5781C313.406 71.6094 313.218 67.5 312.843 66.25C312.468 64.9688 312.124 64.125 311.812 63.7188C311.437 63.25 310.531 62.6719 309.093 61.9844C311.031 60.5156 312.952 57.7812 314.859 53.7812L317.202 48.8594C318.859 45.1094 320.265 42.6875 321.421 41.5938C322.609 40.4688 323.734 39.9062 324.796 39.9062Z"
                fill="black"
              />
              <path
                d="M371.795 90.0625C372.92 90.8125 373.483 92.125 373.483 94C373.483 95.8438 373.233 97.4688 372.733 98.875C372.233 100.281 371.358 101.594 370.108 102.812C367.295 105.562 363.014 106.938 357.264 106.938C350.576 106.938 345.483 104.469 341.983 99.5312C338.889 95.125 337.342 89.1719 337.342 81.6719C337.342 74.1094 339.436 68.1719 343.623 63.8594C347.592 59.7656 352.967 57.7188 359.748 57.7188C364.467 57.7188 368.154 59.0938 370.811 61.8438C372.904 64.0312 373.951 66.5625 373.951 69.4375C373.951 72.2812 373.389 74.8594 372.264 77.1719C371.17 79.4531 369.545 81.4219 367.389 83.0781C362.951 86.5156 356.748 88.3281 348.779 88.5156C349.436 94.7969 351.404 99 354.686 101.125C355.873 101.875 357.451 102.25 359.42 102.25C361.389 102.25 363.483 101.219 365.701 99.1562C367.92 97.0938 369.951 94.0625 371.795 90.0625ZM348.498 84.0625C358.373 83.4062 363.311 78.625 363.311 69.7188C363.311 66.375 362.311 64.125 360.311 62.9688C359.623 62.5938 358.717 62.4062 357.592 62.4062C356.467 62.4062 355.326 62.75 354.17 63.4375C353.045 64.125 352.061 65.25 351.217 66.8125C349.404 70.2188 348.498 75.4844 348.498 82.6094V84.0625Z"
                fill="black"
              />
              <path
                d="M378.504 106C379.941 101.062 380.66 92.5781 380.66 80.5469C380.66 71.9844 379.91 66.1406 378.41 63.0156C378.035 62.2344 377.613 61.5 377.144 60.8125L375.598 58.6562H391.863C391.394 60.2188 391.082 61.6875 390.926 63.0625L390.551 66.4375C394.332 60.625 399.144 57.7188 404.988 57.7188C408.769 57.7188 411.723 59.1875 413.848 62.125C415.91 65 416.941 68.8906 416.941 73.7969V78.8125C416.941 87.4062 417.019 92.6562 417.176 94.5625C417.332 96.4688 417.457 97.9219 417.551 98.9219C417.644 99.9219 417.754 100.812 417.879 101.594C418.098 103.062 418.426 104.531 418.863 106H405.129C406.566 101.062 407.285 92.5781 407.285 80.5469C407.285 75.7344 406.973 72.4375 406.348 70.6562C405.754 68.875 405.035 67.6094 404.191 66.8594C403.348 66.0781 402.238 65.6875 400.863 65.6875C398.332 65.6875 396.035 66.6875 393.973 68.6875C392.191 70.4062 390.832 72.5938 389.894 75.25C389.832 76.0938 389.801 76.9688 389.801 77.875V80.5469C389.801 92.5781 390.519 101.062 391.957 106H378.504Z"
                fill="black"
              />
              <path
                d="M436.824 39.9062C436.168 42.3125 435.839 45.2031 435.839 48.5781C435.839 51.9219 435.902 54.0625 436.027 55C436.183 55.9375 436.418 56.6875 436.73 57.25C437.324 58.1875 438.48 58.6562 440.199 58.6562H452.761C452.761 60.4062 452.339 61.75 451.496 62.6875C449.964 64.375 448.089 65.2188 445.871 65.2188C444.777 65.2188 443.808 65.0625 442.964 64.75C441.433 64.125 440.246 63.8125 439.402 63.8125C438.558 63.8125 437.871 63.9844 437.339 64.3281C436.808 64.6406 436.386 65.1094 436.074 65.7344C435.511 66.8594 435.23 69.3125 435.23 73.0938C435.23 76.875 435.339 80.75 435.558 84.7188C435.808 88.6875 436.402 92.0156 437.339 94.7031C438.277 97.3594 439.699 99.3594 441.605 100.703C443.511 102.047 446.136 102.719 449.48 102.719C449.48 103.688 448.824 104.844 447.511 106.188C447.168 106.562 446.871 106.812 446.621 106.938C441.089 106.938 436.949 106.281 434.199 104.969C431.043 103.406 428.793 100.625 427.449 96.625C426.105 92.5625 425.433 86.5469 425.433 78.5781C425.433 71.6094 425.246 67.5 424.871 66.25C424.496 64.9688 424.152 64.125 423.839 63.7188C423.464 63.25 422.558 62.6719 421.121 61.9844C423.058 60.5156 424.98 57.7812 426.886 53.7812L429.23 48.8594C430.886 45.1094 432.293 42.6875 433.449 41.5938C434.636 40.4688 435.761 39.9062 436.824 39.9062Z"
                fill="black"
              />
              <path
                d="M445 8C445 3.58172 448.582 0 453 0H485C489.418 0 493 3.58172 493 8V40C493 44.4183 489.418 48 485 48H453C448.582 48 445 44.4183 445 40V8Z"
                fill="#D9D9D9"
              />
              <path
                d="M464.328 16.5781L458.453 35H453.016L461.438 12.25H464.875L464.328 16.5781ZM469.203 35L463.312 16.5781L462.703 12.25H466.188L474.641 35H469.203ZM468.953 26.5312V30.4688H457.094V26.5312H468.953Z"
                fill="black"
              />
              <path d="M483.553 12.25V35H478.475V12.25H483.553Z" fill="black" />
            </svg>
          </div>
          <h2>bjkhlksjfklsdjflskö</h2>
        </div>
        <div
          id="contentContainer"
          className="flex flex-col gap-2 justify-start items-start p-8 bg-red-400"
        >
          <div id="nameBox" className="rounded-lg bg-secondary p-4">
            <h3 className="font-bold text-secondary-content">Lady Content:</h3>
          </div>
          <div
            id="answerBox"
            className="flex flex-row w-full lg:w-1/2 bg-secondary rounded-lg p-4"
          >
            <p className="text-secondary-content">{answer}</p>
          </div>
        </div>
        <div
          id="uI"
          className="flex flex-row items-center justify-start w-full px-0 lg:px-32 bg-green-500 flex-wrap"
        >
          <div className="flex flex-col justify-center items-start gap-2 p-8 bg-primary w-full lg:w-2/3">
            <h2 className="text-xl text-primary-content font-bold">
              Specify Content
            </h2>
            <h3 className="text text-primary-content pb-4 w-2/3">
              The Lady can assist you with pretty much everything but she needs
              some guidance.
            </h3>
            <div className="flex flex-row justify-between items-center gap-2 w-full flex-wrap">
              <h2 className="text-xl text-primary-content font-bold">
                Content Type:
              </h2>
              <div className="flex flex-row justify-end items-center gap-2">
                <label className="text-primary-content">Blog</label>
                <input
                  className="border border-primary"
                  type="checkbox"
                  value="blog"
                  onChange={(e) => setPrompt(e.target.value)}
                />
                <label className="text-primary-content">Article</label>
                <input
                  className="border border-primary"
                  type="checkbox"
                  value="article"
                  onChange={(e) => setPrompt(e.target.value)}
                />
                <label className="text-primary-content">Email</label>
                <input
                  className="border border-primary"
                  type="checkbox"
                  value="email"
                  onChange={(e) => setPrompt(e.target.value)}
                />
                <label className="text-primary-content">Poem</label>
                <input
                  className="border border-primary"
                  type="checkbox"
                  value="poem"
                  onChange={(e) => setPrompt(e.target.value)}
                />
                <label className="text-primary-content">Compliment</label>
                <input
                  className="border border-primary"
                  type="checkbox"
                  value="compliment"
                  onChange={(e) => setPrompt(e.target.value)}
                />
              </div>
            </div>

            <div className="flex items-center w-full gap-2">
              <input
                className="border border-primary w-full px-2 py-2.5"
                placeholder="Explain to LadyContent"
                type="text"
                onChange={(e) => setPrompt(e.target.value)}
              />

              <button className="btn btn-accent" onClick={sendPrompt}>
                Send
              </button>
            </div>
          </div>
          <div className="flex flex-col justify-start items-start gap-2 p-8 bg-warning w-full h-full lg:w-1/3">
            <h2>History</h2>
          </div>
        </div>
      </div>
    </>
  );
}
